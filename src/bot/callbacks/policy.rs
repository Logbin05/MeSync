use teloxide::prelude::*;
use teloxide::types::{CallbackQuery, InlineKeyboardButton, InlineKeyboardMarkup, ParseMode};

pub async fn handle(bot: Bot, q: CallbackQuery) -> ResponseResult<()> {
    let chat_id = q
        .message
        .as_ref()
        .map(|m| m.chat().id)
        .unwrap_or(ChatId(q.from.id.0 as i64));

    let policy_text = r#"
        <b>üìí–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ MeSync</b>

        <blockquote>
            –ú—ã —Ü–µ–Ω–∏–º –≤–∞—à—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.
            –ò—Å–ø–æ–ª—å–∑—É—è –ë–æ—Ç–∞, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –Ω–∞—Å—Ç–æ—è—â–µ–π –ø–æ–ª–∏—Ç–∏–∫–æ–π.

        <b>1.–û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</b>
            –ù–∞—Å—Ç–æ—è—â–∞—è –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –±–æ—Ç MeSync (–¥–∞–ª–µ–µ ‚Äî –ë–æ—Ç)
            –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –∑–∞—â–∏—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π
            –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∑–∞–¥–∞—á–∞–º–∏,–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –ø–æ–¥–ø–∏—Å–∫–µ.
            –ò—Å–ø–æ–ª—å–∑—É—è –ë–æ—Ç–∞, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –¥–∞–Ω–Ω–æ–π –ü–æ–ª–∏—Ç–∏–∫–æ–π.

        <b>2.–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ</b>
            –ë–æ—Ç –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –∏ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –ª–∏—à–Ω—é—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
            –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

            2.1.–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã Telegram:
            „Éª–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç`–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user_id);
            „Éª–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (username);
            „Éª–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –≤ Telegram).

            2.2.–†–∞–±–æ—á–∏–µ –¥–∞–Ω–Ω—ã–µ (–≤ –ø–∞–º—è—Ç–∏):
            „Éª–°–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø–ª–∞–Ω—ã;
            „Éª–ù–∞—Å—Ç—Ä–æ–π–∫–∏, –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏;
            „Éª–°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–µ–∞–Ω—Å–∞).

            2.3.–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ):
            „Éª–°–ª—É–∂–µ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ë–æ—Ç–∞.

        <b>3.–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</b>
            „Éª–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (RAM) –∏ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
            „Éª–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ë–æ—Ç–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
            „Éª–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ë–æ—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ—Å–Ω–æ–≤–µ.

        <b>4.–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</b>
            –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è:
            „Éª–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ –∑–∞–¥–∞—á;
            „Éª–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é;
            „Éª–∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ —Ä–∞–º–∫–∞—Ö —Å–µ–∞–Ω—Å–∞;
            „Éª—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

        <b>5.–ü–æ–¥–ø–∏—Å–∫–∞ –∏ –ø–ª–∞—Ç–µ–∂–∏</b>
            „Éª–í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Telegram Payments.
            „ÉªTelegram —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
            „Éª–ë–æ—Ç –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º, –±–∞–Ω–∫–æ–≤—Å–∫–∏–º –∫–∞—Ä—Ç–∞–º –∏–ª–∏ –∏–Ω–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
            „Éª–ú—ã –ø–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç Telegram –æ —Ñ–∞–∫—Ç–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –∏–ª–∏ –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏.

        <b>6.–£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</b>
            „Éª–¢–∞–∫ –∫–∞–∫ –ë–æ—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è:
            „Éª–ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ë–æ—Ç–∞;
            „Éª–ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ–∞–Ω—Å–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

        <b>7.–û—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥</b>
            „Éª–ë–æ—Ç MeSync —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º.
            „Éª–õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∫–æ–¥–æ–º –∏ —É–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–∫—Ä—ã—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
                –ø–æ —Å–±–æ—Ä—É –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∏–Ω–æ–π –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
            „Éªüîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: (—É–∫–∞–∂–∏ —Å—Å—ã–ª–∫—É –Ω–∞ GitHub, –Ω–∞–ø—Ä–∏–º–µ—Ä)
            https://github.com/Logbin05/MeSync

        <b>8.–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–ª–∏—Ç–∏–∫–µ</b>
            „Éª–ú—ã –º–æ–∂–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –Ω–∞—Å—Ç–æ—è—â—É—é –ü–æ–ª–∏—Ç–∏–∫—É.
            „Éª–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∑–∞–ø—Ä–æ—Å—É –≤ –ë–æ—Ç–µ –∏–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–µ–∫—Ç–∞.
            „Éª–ü—Ä–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω—ã —á–µ—Ä–µ–∑ Telegram.

        <b>9.–ö–æ–Ω—Ç–∞–∫—Ç—ã</b>
            –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
            –≤ –±–æ—Ç–µ, –Ω—É–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ "üî∞ –ü–æ–¥–¥–µ—Ä–∂–∫–∞". –°–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –ø–æ—á—Ç–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

            –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 26 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
            –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: –ö–æ–º–∞–Ω–¥–∞ MeSync
        </blockquote>

    "#;

    let mut keyboard: Vec<Vec<InlineKeyboardButton>> = Vec::new();
    keyboard.push(vec![InlineKeyboardButton::callback("‚¨ÖÔ∏è –ù–∞–∑–∞–¥", "GoToBack")]);
    let markup = InlineKeyboardMarkup::new(keyboard);

    if let Some(msg) = q.message {
        bot.edit_message_text(chat_id, msg.id(), policy_text)
            .parse_mode(ParseMode::Html)
            .reply_markup(markup)
            .await?;
    }
    Ok(())
}
